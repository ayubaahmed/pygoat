{% extends 'base.html' %}

{% block title %}
<title>Online Store - Business Logic Lab</title>
{% endblock %}

{% block content %}
<div class="content">
    <h3>ðŸ›’ PyGoat Electronics Store</h3>
    
    <div class="box">
        <h4>Welcome to our store!</h4>
        <p class="bp">Browse our products and add them to your cart. Use discount coupons at checkout!</p>
        
        <div style="text-align: right; margin-bottom: 20px;">
            <button type="button" onclick="window.location.href='/cart'" style="background: #28a745;">
                View Cart ({{ session.cart|length if session.cart else 0 }} items)
            </button>
        </div>
    </div>

    <div class="product-grid">
        {% for product in products %}
        <div class="product-card">
            <div class="product-image">{{ product.image }}</div>
            <h4>{{ product.name }}</h4>
            <p class="product-price">â‚¹{{ product.price }}</p>
            <button onclick="window.location.href='/add_to_cart/{{ product.id }}'" class="add-to-cart-btn">
                Add to Cart
            </button>
        </div>
        {% endfor %}
    </div>

    <div class="section">
        <h4>Lab Hint</h4>
        <p class="bp">
            Add some products to your cart (total should be â‚¹1000 or more) and then proceed to checkout. 
            Try applying the discount coupons and see what happens when you apply them multiple times!
        </p>
        <p class="bp">
            <strong>Available Coupons:</strong> <code>DISCOUNT10</code> and <code>SAVE20</code>
        </p>
    </div>
</div>

<style>
.product-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin: 20px 0;
}

.product-card {
    background: var(--card-bg);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 20px;
    text-align: center;
    box-shadow: var(--card-shadow);
    transition: all 0.3s ease;
}

.product-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.15);
}

.product-image {
    font-size: 4rem;
    margin-bottom: 10px;
}

.product-price {
    font-size: 1.5rem;
    font-weight: bold;
    color: var(--button-bg);
    margin: 10px 0;
}

.add-to-cart-btn {
    background: var(--button-bg);
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 1rem;
    transition: all 0.3s ease;
    width: 100%;
}

.add-to-cart-btn:hover {
    background: var(--button-hover);
}
</style>
{% endblock %}